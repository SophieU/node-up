<!--统计查看-->

<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>一生约-后台管理界面</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" type="text/css" href="../../css/commoncss/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../../css/commoncss/reset.css" />
    <link rel="stylesheet" type="text/css" href="../../css/commoncss/common.css" />
    <link rel="stylesheet" href="../../zTree_v3/css/zTreeStyle/zTreeStyle.css">
    <link rel="stylesheet" type="text/css" href="../../css/statistics/complain.css" />
    <link rel="stylesheet" type="text/css" href="../../font-awesome-4.7.0/css/font-awesome.css" />
    <!--日期控件-->
    <link rel="stylesheet" href="../../css/commoncss/bootstrap-datetimepicker.min.css" />
</head>

<body>
<!--头部信息开始-->
<div id="header">
    <img class="logo" src="../../images/img/logo03.png"/>
    <ul class="head-nav">
        <li class="active">统计查看</li>
        <li><a href="../staffManagement/personManagement.html">小区管理</a></li>
        <li><a href="../staffManagement/personManagement.html">物业app管理</a></li>
        <li><a href="../staffManagement/personManagement.html">员工管理</a></li>
        <li><a href="../resourceManagement/proprietor.html">资源管理</a></li>
        <li><a href="../report/oneLv.html">报事报修</a></li>
        <li>收费管理</li>
        <li>财务结算</li>
        <li>系统管理</li>
    </ul>
    <div class="user">
        <img src="../../images/ico/icon-down.png"/>
        <p>Hello，Tom</p>
    </div>
</div>
<!--头部信息结束-->
<!--内容部分开始-->
<div id="main">
    <!-- 左侧导航开始 -->
    <div class="main-nav">
        <ul>
            <li class="active">
                <div class="flag"></div>
                <a href="##">审批管理 </a>
                <ol class="sub-nav">
                    <li class="active-sub"><a href="##">假期管理</a></li>
                    <li><a href="##">余额管理</a></li>
                    <li><a href="##">数据管理</a></li>
                </ol>
            </li>
        </ul>
    </div>
    <div class="main-info clearfix">
        <!-- 目录导航开始 -->
        <div class="info-title">
            <ul>
                <li>小区管理</li>
                <li>></li>
                <li>报警管理</li>
            </ul>
            <p>帮助</p>
        </div>
        <!-- 目录导航结束-->
        <!-- 主要内容开始 -->

        <div class="message-list main-content clearfix">
            <div class="table-content">
                <div class="table-header clearfix">
                    <div class="table-filter form-inline">
                        <div class="form-group">
                            <label>选择小区</label>
                            <select name="" id="" class="form-control">
                                <option value=" ">请选择</option>
                                <option value=" ">加利福</option>
                                <option value=" ">力宝大厦</option>
                            </select>
                        </div>
                    </div>
                    <button data-target="#workTimeModal" data-toggle="modal" class="btn btn-default pull-right">设置工作时间</button>
                </div>


                <table class="table ">
                    <thead>
                    <tr>
                        <th>流程名称</th>
                        <th>排序</th>
                        <th>操作</th>

                    </tr>
                    </thead>
                    <tbody>
                        <tr class="sub-table">
                           <td colspan="3">考勤休假</td>
                        </tr>
                        <tr>
                            <td>请假</td>
                            <td>
                                <i class="sort fa fa-arrow-up"></i>
                                <i class="sort fa fa-arrow-down"></i>
                            </td>
                            <td><a class="showFlow" href="##">审批流程</a> </td>
                        </tr>
                        <tr>
                            <td>出差</td>
                            <td>
                                <i class="sort up fa fa-arrow-up"></i>
                                <i class="sort down fa fa-arrow-down"></i>
                            </td>
                            <td><a href="##" class="showFlow">审批流程</a> </td>
                        </tr>
                    </tbody>
                    <tbody>
                    <tr class="sub-table">
                        <td colspan="3">行政审批</td>
                    </tr>
                    <tr>
                        <td>通用审批</td>
                        <td>
                            <i class="sort up fa fa-arrow-up"></i>
                            <i class="sort down fa fa-arrow-down"></i>
                        </td>
                        <td><a class="showFlow" href="##">审批流程</a> </td>
                    </tr>
                    <tr>
                        <td>用章申请</td>
                        <td>
                            <i class="sort fa fa-arrow-up"></i>
                            <i class="sort fa fa-arrow-down"></i>
                        </td>
                        <td><a class="showFlow" href="##">审批流程</a> </td>
                    </tr>
                    </tbody>
                </table>

            </div>

            <!--审批流程-->
            <div class="exame-flow">
                <div class="exame-header">
                    <button class="hideExame btn btn-default btn-sm pull-left">返回</button>
                    <h3>请假流程设置</h3>
                </div>
                <div class="exame-content">
                    <div class="exame-item">
                        <div class="exame-item-title">默认审批人</div>
                        <div class="exame-item-content">
                            <div class="person-list">
                                <div class="person">直接主管 <span class="close">&times;</span></div>
                                <div class="person">第二级主管 <span class="close"> &times;</span></div>
                                <div class="person">黄世仁 <span class="close">&times;</span></div>
                            </div>
                            <i class="fa fa-plus-circle" data-target="#addPerson" data-toggle="modal"></i>
                        </div>
                    </div>
                    <div class="exame-item">
                        <div class="exame-item-title">分条件审批</div>
                        <div class="exame-item-content">
                            <button class="btn btn-default" data-toggle="modal" data-target="#exameRule">添加</button>
                        </div>
                        <div class="exame-sub">
                            <div class="exame-sub-title">优先级1</div>
                            <div class="exame-sub-content">
                                <div class="panel panel-default rulePanel">
                                    <div class="panel-heading clearfix">
                                        <span>如果请假类型属于：年假  天数 大于2</span>
                                        <div class="pull-right right-control">
                                            <a data-toggle="modal" data-target="#exameRule">编辑</a>
                                            <a >删除</a>
                                            <div class="sort-icon">
                                                <i class="fa fa-angle-up disabled" ></i>
                                                <i class="fa fa-angle-down"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel-body">
                                       <div class="exame-sub">
                                           <div class="exame-sub-title">审批人</div>
                                           <div class="exame-sub-content">
                                               <div class="person-list">
                                                   <div class="person">直接主管 <span class="close">&times;</span></div>
                                               </div>
                                               <i class="fa fa-plus-circle" data-target="#addPerson" data-toggle="modal"></i>
                                           </div>
                                       </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="exame-sub">
                            <div class="exame-sub-title">优先级2</div>
                            <div class="exame-sub-content">
                                <div class="panel panel-default rulePanel">
                                    <div class="panel-heading clearfix">
                                        <span>如果请假类型属于：年假  天数 大于2</span>
                                        <div class="pull-right">
                                            <a data-toggle="modal" data-target="#exameRule">编辑</a>
                                            <a >删除</a>
                                            <div class="sort-icon">
                                                <i class="fa fa-angle-up"></i>
                                                <i class="fa fa-angle-down disabled" ></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel-body">
                                        <div class="exame-sub">
                                            <div class="exame-sub-title">审批人</div>
                                            <div class="exame-sub-content">
                                                <div class="person-list">
                                                    <div class="person">直接主管 <span class="close">&times;</span></div>
                                                </div>
                                                <i class="fa fa-plus-circle" data-target="#addPerson" data-toggle="modal"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- 7-18新增 （新原modal移动到exame-flow内部结尾处）-->
                         <!--添加审批人-->
                            <div class="modal fade" id="addPerson">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" ><span >&times;</span></button>
                                                <h3>添加审批人</h3>
                                            </div>
                                            <div class="modal-body">
                                                <div class="form-group row">
                                                    <label class="col-md-2">审批人类型：</label>
                                                    <div class="col-md-6">
                                                        <label>
                                                            <input type="radio" name="personType">
                                                            主官-指定一级
                                                        </label>
                                                        <label>
                                                            <input type="radio" name="personType">
                                                            指定成员
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-md-2">指定人员：</label>
                                                    <div class="col-md-6">
                                                        <input readonly class="form-control choosePerson" data-toggle="modal" data-target="#treeModal" />
                                                    </div>
                                                </div>
                                                <!-- 7-18新增 -->
                                                <div class="form-group row">
                                                    <label  class="col-md-2">默认审批人:</label>
                                                    <div class="col-md-9">
                                                        <div class="person-list modal-list">
                                                            <div class="person">直接主管 <span class="close">&times;</span></div>
                                                            <div class="person">第二级主管 <span class="close"> &times;</span></div>
                                                            <div class="person">黄世仁 <span class="close">&times;</span></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- 7-18新增 -->
                                            </div>
                                            <div class="modal-footer">
                                                <button class="btn btn-default" data-dismiss="modal">取消</button>
                                                <button class="btn btn-primary" onClick="addPerson('员工名称')">确定</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                 <!-- 7-18新增 （新原modal移动到exame-flow内部结尾处）-->
                    </div>

                    <div class="exame-item">
                        <div class="exame-item-title">更多设置</div>
                        <div class="exame-sub">
                            <div class="exame-sub-title">审批人去重</div>
                            <div class="exame-sub-content">
                                <select class="form-control">
                                    <option value="">不启用</option>
                                    <option value="">同一审批人仅在连续出现时，自动去重</option>
                                    <option value="">同一审批人多次出现时，自动去重</option>
                                    <option value="">同一审批人多次出现时，仅保留第一个</option>
                                </select>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="exame-footer clearfix">
                    <button class="saveExame btn btn-primary pull-right">保存设置</button>
                </div>
            </div>
           
            <!--人员树-->
          <div class="modal fade" id="treeModal">
              <div class="modal-dialog modal-sm">
                  <div class="modal-content">
                      <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal" ><span >&times;</span></button>
                          <h4>选择人员</h4>
                      </div>
                      <div class="modal-body">
                          <ul id="treeDemo" class="ztree"></ul>
                      </div>
                      <div class="modal-footer">
                          <button class="btn btn-default" data-dismiss="modal">取消</button>
                          <button class="btn btn-primary sureTree" >确定</button>
                      </div>
                  </div>
              </div>
          </div>
            <!--条件审批-->
            <div id="exameRule" class="modal fade">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" ><span >&times;</span></button>
                            <h4>设置条件</h4>
                        </div>
                        <div class="modal-body">
                            <h5>当审批人满足以下条件时:</h5>
                            <div class="rule-block">
                                <div class="form-group">
                                    <label for="">发起人</label>
                                    <button class="btn btn-link">修改</button>
                                </div>
                                <div class="form-group">
                                    <label for="">请假类型</label>
                                    <!-- 7-18新增 -->
                                    <div class="input-group">
                                        <label ><input type="radio" name="vacationType">年假</label>
                                        <label ><input type="radio" name="vacationType">事假</label>
                                        <label ><input type="radio" name="vacationType">病假</label>
                                        <label ><input type="radio" name="vacationType">婚假</label>
                                        <label ><input type="radio" name="vacationType">产假</label>
                                        <label ><input type="radio" name="vacationType">丧假</label>
                                    </div>
                                    <!-- 7-18新增 -->
                                </div>
                                <div class="form-group">
                                    <label>时长</label>
                                    <div class="input-group">
                                        <select class="form-control">
                                            <option value="">小于</option>
                                            <option value="">大于</option>
                                            <option value="">小于等于</option>
                                            <option value="">大于等于</option>
                                            <option value="">等于</option>
                                            <option value="">介于两者之间</option>
                                        </select>
                                    </div>
                                    <div class="input-group">
                                        <input type="text" value="2" class="form-control w100">
                                    </div>
                                </div>
                            </div>
                            <h5>对应审批人：</h5>
                            <div class="rule-block">
                                <div class="form-group">
                                    <label for="">审批人</label>
                                    <i class="fa fa-plus-circle addBtn" data-target="#treeModal" data-toggle="modal"></i>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-default" data-dismiss="modal">取消</button>
                            <button class="btn btn-primary sureRule" >确认</button>
                        </div>
                    </div>
                </div>
            </div>
            <!--审批流程-->

        </div>

    </div>
    <!-- 左侧导航结束 -->
    <!-- 主要内容结束 -->
    <div id="workTimeModal" class="modal fade">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">设置工作日时间</h4>
                </div>
                <div class="modal-body">
                    <form action="" class="form form-horizontal">
                        <div class="form-group">
                            <label class="col-md-2">上午上班时间</label>
                            <div class="col-md-6">
                                <input type="text" class="form-control hour-time" >
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2">上午下班时间</label>
                            <div class="col-md-6">
                                <input type="text" class="form-control hour-time" >
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2">下午上班时间</label>
                            <div class="col-md-6">
                                <input type="text" class="form-control hour-time" >
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2">下午下班时间</label>
                            <div class="col-md-6">
                                <input type="text" class="form-control hour-time" >
                            </div>
                        </div>

                        <div class="form-group">
                            <span class="grey-text">保存后，全公司员工将按新的规则重新计算</span>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary">保存</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!--内容部分结束-->
</body>
<!-- jq -->
<script src="../../js/lib/jquery-2.1.0.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/lib/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
<!--日期控件-->
<script src="../../js/lib/bootstrap-datetimepicker.min.js" type="text/javascript" charset="utf-8"></script>
<!--i18n.js-->
<script src="../../js/lib/bootstrap-datetimepicker.zh-CN.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/lib/date.js" type="text/javascript" charset="utf-8"></script>
<script src="../../zTree_v3/js/jquery.ztree.all.min.js"></script>
<script src="../../js/my-ztree.js"></script>
<!-- 操作 -->
<script type="text/javascript " charset="utf-8 ">
    //按月时间
    $('.hour-time').datetimepicker({
        language:  'zh-CN',
        todayBtn:  "linked",
        autoclose: 1,
        startView: 1,
        todayHighlight: 1,
        minView: 0
    });


    $('.table').on('click','.showFlow',function(){
        $('.exame-flow').addClass('show')
    })
    $('.hideExame').on('click',function(){
        $('.exame-flow').removeClass('show')
    });
    $('.saveExame').on('click',function(){
        $('.exame-flow').removeClass('show')
    })

    $('.sureTree').on('click',function(){
        //确定人员后
        $('#treeModal').modal('hide');


    });
    //删除审批人
    $('.person-list').on('click','.close',function(){
        var target = $(this).closest('.person');
        $('.person-list').find(target).remove()
    });

    function addPerson(val){
        var html = '<div class="person">'+val+' <span class="close">&times;</span></div>'
        $('.person-list').append(html);
        $('#addPerson').modal('hide');
    }

    //确定条件
    $('.sureRule').on('click',function(){
        $('#exameRule').modal('hide')
    })
</script>

</html>