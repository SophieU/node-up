<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>物业收费计算器</title>
    <link rel="stylesheet" href="../../js/lib/layui/layui/css/layui.css">
    <link rel="stylesheet" type="text/css" href="../../css/moneyManage/moneyMange.css" />
</head>
<body>
    <div class="calc-page">
        <div class="calc-header">
            <div class="calc-type">计费科目<i class="must">*</i>：</div>
            <div class="text-grey">商用住宅物业费</div>
            <div class="calc-result">
                <!--<span>&lt;基本单价&gt;</span>-->
            </div>
        </div>
        
        <div class="calc-panel" >
            <ul class="calc-one" id="calcOne">
                <li data-type="house">房屋类</li>
                <li data-type="parking">车位类</li>
            </ul>
            <ul class="calc-two">
                <li>本单元房屋数</li>
                <li>本单元房屋数</li>
            </ul>
            <div class="calc-box">
                <div class="calc-box-header">
                    <button class="layui-btn layui-btn-normal layui-btn-sm addPrice">添加基本单价</button>
                    <button class="layui-btn layui-btn-normal layui-btn-sm clearFormulate">清空公式</button>
                    <button class="layui-btn layui-btn-normal layui-btn-sm">验证公式</button>
                </div>
                <div class="calc-box-inner">
                    <h5>运算符</h5>
                    <div class="calc-box-panel">
                        <div class="calc-btns">
                            <div class="left">
                                <div>
                                    <button class="layui-btn layui-btn-primary">1</button>
                                    <button class="layui-btn layui-btn-primary">2</button>
                                    <button class="layui-btn layui-btn-primary">3</button>
                                </div>
                                <div>
                                    <button class="layui-btn layui-btn-primary">4</button>
                                    <button class="layui-btn layui-btn-primary">5</button>
                                    <button class="layui-btn layui-btn-primary">6</button>
                                </div>
                                <div>
                                    <button class="layui-btn layui-btn-primary">7</button>
                                    <button class="layui-btn layui-btn-primary">8</button>
                                    <button class="layui-btn layui-btn-primary">9</button>
                                </div>
                                <div>
                                    <button class="layui-btn layui-btn-primary">0</button>
                                    <button class="layui-btn layui-btn-primary del"><strong>←</strong></button>
                                    <button class="layui-btn layui-btn-primary"><strong>.</strong></button>
                                </div>
                            </div>
                            <div class="right">
                                <div>
                                    <button class="layui-btn layui-btn-primary">加 +</button>
                                    <button class="layui-btn layui-btn-primary">减 -</button>
                                </div>
                                <div>
                                    <button class="layui-btn layui-btn-primary">乘 *</button>
                                    <button class="layui-btn layui-btn-primary">除  /</button>
                                </div>
                                <div>
                                    <button class="layui-btn layui-btn-primary">(</button>
                                    <button class="layui-btn layui-btn-primary">)</button>
                                </div>
                            </div>
                        </div>
                        <div class="calc-info">
                            <textarea placeholder="此处对第二列所选参数进行解释说明"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="calc-footer">
            <button onclick="cancle()" class="layui-btn layui-btn-danger">取消</button>
            <button class="layui-btn layui-btn-normal">保存设置</button>
        </div>
    </div>
    <script src="../../js/lib/jquery-2.1.0.js"></script>
    <script src="../../js/lib/layui/layui/layui.all.js"></script>
    <script src="../../js/calculator.js"></script>
    <script>
        // 渲染假数据
        var fakeData=[
                {
                    type:'house',
                    name:'房屋类',
                    children:[
                        {name:'本单元房屋数'},
                        {name:'本栋房屋数'},
                        {name:'本楼层房屋数'},
                        {name:'当月总营业额'},
                        {name:'房屋产权面积'},
                        {name:'房屋个数'},
                        {name:'房屋公摊面积'},
                        {name:'房屋楼层数'},
                        {name:'房屋使用面积'},
                        {name:'计费天数'},
                        {name:'合同面积'},
                    ]
                },{
                    type:'parking',
                    name:'车位类',
                    children:[
                        {name:'本单元车位数'},
                        {name:'本栋车位数'},
                        {name:'本楼层车位数'},
                        {name:'当月总营业额'},
                        {name:'车位产权面积'},
                        {name:'车位个数'},
                        {name:'车位公摊面积'},
                        {name:'车位楼层数'},
                        {name:'车位使用面积'},
                        {name:'计费天数'},
                        {name:'合同面积'}
                    ]
                }
            ];

        $('.calc-one').on('click','li',function(){
            var type = $(this).data('type');
            renderCalcTwo(type);
        });
        $(function(){
            renderCalcTwo('house')
        })
        //渲染第二项（计费科目），当选中第一项后，渲染第二项
        function renderCalcTwo(type){
            var target = fakeData.filter(function(item,index){
                if(item.type===type){
                    return item;
                }
            });
            if(target.length!==0){
                var html = '';
                target[0].children.forEach(function(item,index){
                    html+='<li>'+item.name+'</li>'
                });
                $('.calc-two').html(html);
            }
        }

        function cancle(){
            //假设这是iframe页
            var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
            parent.layer.close(index); //再执行关闭   
        }
    </script>
</body>
</html>